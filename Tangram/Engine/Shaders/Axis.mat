#order 3000
#material
Scalar lineLength: 10
Scalar lineWidth: 3
#vertex
#version 410 core
layout (location = 0) in vec2 pos;
void main() {
    gl_Position = vec4(0, pos.x, pos.y, 1.0);
}

#geometry
#version 410 core
layout (points) in;
layout (line_strip, max_vertices = 6) out;
uniform mat4 pmat;
uniform float lineLength;
uniform float lineWidth;
void main() {
    gl_Position = gl_in[0].gl_Position;
    gl_PointSize = lineWidth;
    gl_Color = vec4(1, 0, 0, 1);
    EmitVertex();
    gl_Position = gl_in[0].gl_Position + vec4(lineLength, 0, 0, 0);
    gl_Position = pmat * gl_Position;
    gl_Color = vec4(1, 0, 0, 1);
    EmitVertex();
    gl_Position = gl_in[0].gl_Position;
    gl_PointSize = lineWidth;
    gl_Color = vec4(0, 1, 0, 1);
    EmitVertex();
    gl_Position = gl_in[0].gl_Position + vec4(0, lineLength, 0, 0);
    gl_Position = pmat * gl_Position;
    gl_Color = vec4(0, 1, 0, 1);
    EmitVertex();
    gl_Position = gl_in[0].gl_Position;
    gl_PointSize = lineWidth;
    gl_Color = vec4(0, 0, 1, 1);
    EmitVertex();
    gl_Position = gl_in[0].gl_Position + vec4(0, 0, lineLength, 0);
    gl_Position = pmat * gl_Position;
    gl_Color = vec4(0, 0, 1, 1);
    EmitVertex();
    EndPrimitive();
}